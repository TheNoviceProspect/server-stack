#server {
#    listen      80;
#    listen      [::]:80;
#    server_name www.home.tnp.me.uk;
#    set         $base /var/www/html;
#    root        $base/;
#
     # logging
#    access_log  /var/log/nginx/access.log combined buffer=512k flush=1m;
#    error_log   /var/log/nginx/error.log warn;

 
#}

# non-www, subdomains redirect
server {
    listen      80;
    listen      [::]:80;
    server_name .home.tnp.me.uk;
    return      301 http://www.home.tnp.me.uk$request_uri;
}

server {
    listen 80;
    server_name www.home.tnp.me.uk;
    location / {
        return 301 https://$host$request_uri;
    }
    location /web/ {
        root /var/www/html;
    }
    location /.well-known/acme-challenge/ {
    	root /var/www/certbot;
    }
}
#server {
#    listen 443 ssl;
#    server_name www.home.tnp.me.uk;
    
#    location / {
#        proxy_pass https://nextcloud/; #for demo purposes
#	 root /var/www/html;
#    }
#    ssl_certificate /etc/letsencrypt/live/home.tnp.me.uk/fullchain.pem;
#    ssl_certificate_key /etc/letsencrypt/live/home.tnp.me.uk/privkey.pem;
#    include /etc/letsencrypt/options-ssl-nginx.conf;
#    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
#}
